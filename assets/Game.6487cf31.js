import{_ as e,u as a,a as s}from"./index.6a317941.js";import{f as l,g as t,C as u,D as r,o as n,l as o,c as i,u as c,E as v,a as m,F as p,G as d,H as E,I as _}from"./core.6b897e2e.js";import{u as y}from"./index.5f5ee7dc.js";var f,R;(R=f||(f={})).GENERAL="GENERAL",R.RESTART="RESTART",R.WIN="WIN",R.YOU_GONE="YOU_GONE";const g={id:"game-layer","class":"transform-gpu flex h-screen justify-center relative bg-gray-900"},T=e(l({setup(e){const l=y(),R=a(),T=t({}),N=t(!1),w=t(!1),A=t(0),L=t(0),G=t(f.GENERAL),I=u((()=>s((()=>import("./Menu.aca82578.js")),["assets/Menu.aca82578.js","assets/Menu.1aaac12c.css","assets/index.6a317941.js","assets/index.e4478da1.css","assets/core.6b897e2e.js","assets/index.5f5ee7dc.js"]))),O=u((()=>s((()=>import("./NoYouAlertBar.c554efac.js")),["assets/NoYouAlertBar.c554efac.js","assets/NoYouAlertBar.2f58b5fd.css","assets/index.6a317941.js","assets/index.e4478da1.css","assets/core.6b897e2e.js","assets/index.5f5ee7dc.js"])));let b;const j=document.createElement("audio"),P=()=>{b.pause()},S=e=>{null==e||e.preventDefault(),null==e||e.stopImmediatePropagation(),null==e||e.stopPropagation(),A.value++,N.value=!N.value,N.value?P():(b.resume(),G.value=f.GENERAL)},k=e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),G.value=f.RESTART,A.value++,P(),N.value=!0},D=async()=>{const e=l.value.currentLevel.setupFileName;var a;e&&(await b.startLevel(e.trim()),w.value=!1,E.bind("esc",S),E.bind("r",k),a=l.value.currentLevel.backgroundMusic,j.src="/music/"+a,j.loop=!0,await j.play())},H=async e=>{switch(e){case _.WIN:G.value=f.WIN,A.value++,E.unbind(["esc","r"]),N.value=!0,await j.pause();break;case _.RESTART:await D()}},M=async e=>{j.pause(),e||L.value++,w.value=!e},x=()=>{S(),D()},W=async()=>{j.pause(),await R.replace({name:"Level"})},Y=async()=>{j.pause(),await R.replace({name:"Home"})};return r((async()=>{b=await(async()=>await d)(),b.setGameOverOutsideHandler(H),b.setYouGoneOutsideHandler(M),T.value.appendChild(b.gameView),await D()})),(e,a)=>(n(),o(p,null,[N.value?(n(),i(c(I),{key:"menu"+A.value,mode:G.value,onRestart:x,onResume:S,onToMenu:W,onToHome:Y},null,8,["mode"])):v("",!0),w.value?(n(),i(c(O),{key:"alertBar"+L.value})):v("",!0),m("div",g,[m("div",{ref_key:"gameLayer",ref:T,"class":"game-layer self-center"},null,512)])],64))}}),[["__scopeId","data-v-1ee867c8"]]),N=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module","default":T});export{N as G,f as M};
