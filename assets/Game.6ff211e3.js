import{u as a,_ as e}from"./index.040f9b1e.js";import{f as s,g as t,C as l,D as n,o as u,q as r,c as o,u as i,E as c,a as v,F as m,l as d,m as p,G as E,H as _,I as R}from"./core.d7de2dd6.js";import{u as y}from"./index.cbc5be3d.js";var f,g;(g=f||(f={})).GENERAL="GENERAL",g.RESTART="RESTART",g.WIN="WIN",g.YOU_GONE="YOU_GONE";d("data-v-5237a132");const T={id:"game-layer","class":"\n       transform-gpu\n        flex\n        h-screen\n        justify-center\n        relative\n        bg-gray-900"};p();const N=s({setup(s){const d=y(),p=a(),g=t({}),N=t(!1),b=t(!1),w=t(0),A=t(0),G=t(f.GENERAL),I=l((()=>e((()=>import("./Menu.83ae579a.js")),["assets/Menu.83ae579a.js","assets/index.040f9b1e.js","assets/index.1e163de8.css","assets/core.d7de2dd6.js","assets/index.cbc5be3d.js"]))),L=l((()=>e((()=>import("./NoYouAlertBar.a288d064.js")),["assets/NoYouAlertBar.a288d064.js","assets/NoYouAlertBar.6e93a7e4.css","assets/core.d7de2dd6.js","assets/index.040f9b1e.js","assets/index.1e163de8.css","assets/index.cbc5be3d.js"])));let O;const j=document.createElement("audio"),P=()=>{O.pause()},S=a=>{null==a||a.preventDefault(),null==a||a.stopImmediatePropagation(),null==a||a.stopPropagation(),w.value++,N.value=!N.value,N.value?P():(O.resume(),G.value=f.GENERAL)},D=a=>{a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation(),G.value=f.RESTART,w.value++,P(),N.value=!0},H=async()=>{const a=d.value.currentLevel.setupFileName;var e;a&&(await O.startLevel(a.trim()),b.value=!1,_.bind("esc",S),_.bind("r",D),e=d.value.currentLevel.backgroundMusic,j.src="/music/"+e,j.loop=!0,await j.play())},M=async a=>{switch(a){case R.WIN:G.value=f.WIN,w.value++,_.unbind(["esc","r"]),N.value=!0,await j.pause();break;case R.RESTART:await H()}},k=async a=>{j.pause(),a||A.value++,b.value=!a},x=()=>{S(),H()},W=async()=>{j.pause(),await p.replace({name:"Level"})},Y=async()=>{j.pause(),await p.replace({name:"Home"})};return n((async()=>{O=await(async()=>await E)(),O.setGameOverOutsideHandler(M),O.setYouGoneOutsideHandler(k),g.value.appendChild(O.gameView),await H()})),(a,e)=>(u(),r(m,null,[N.value?(u(),o(i(I),{key:"menu"+w.value,mode:G.value,onResume:S,onRestart:x,onToMenu:W,onToHome:Y},null,8,["mode"])):c("",!0),b.value?(u(),o(i(L),{key:"alertBar"+A.value})):c("",!0),v("div",T,[v("div",{ref:g,"class":"\n         game-layer\n         self-center"},null,512)])],64))}});N.__scopeId="data-v-5237a132";const b=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module","default":N});export{b as G,f as M};
