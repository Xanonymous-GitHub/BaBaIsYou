import{u as e,_ as a}from"./index.465a7dee.js";import{f as s,g as t,C as l,D as u,o as r,q as n,c as o,u as c,E as i,a as v,F as m,l as d,m as p,G as E,H as _,I as y}from"./core.4e05f9d7.js";import{u as R}from"./index.3c48511e.js";var f,g;(g=f||(f={})).GENERAL="GENERAL",g.RESTART="RESTART",g.WIN="WIN",g.YOU_GONE="YOU_GONE";d("data-v-5237a132");const T={id:"game-layer","class":"transform-gpu flex h-screen justify-center relative bg-gray-900"};p();const N=s({setup(s){const d=R(),p=e(),g=t({}),N=t(!1),w=t(!1),A=t(0),L=t(0),G=t(f.GENERAL),I=l((()=>a((()=>import("./Menu.be071cfc.js")),["assets/Menu.be071cfc.js","assets/index.465a7dee.js","assets/index.6ea2af88.css","assets/core.4e05f9d7.js","assets/index.3c48511e.js"]))),O=l((()=>a((()=>import("./NoYouAlertBar.cdd90dde.js")),["assets/NoYouAlertBar.cdd90dde.js","assets/NoYouAlertBar.1a24c9a1.css","assets/core.4e05f9d7.js","assets/index.465a7dee.js","assets/index.6ea2af88.css","assets/index.3c48511e.js"])));let b;const j=document.createElement("audio"),P=()=>{b.pause()},S=e=>{null==e||e.preventDefault(),null==e||e.stopImmediatePropagation(),null==e||e.stopPropagation(),A.value++,N.value=!N.value,N.value?P():(b.resume(),G.value=f.GENERAL)},D=e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),G.value=f.RESTART,A.value++,P(),N.value=!0},H=async()=>{const e=d.value.currentLevel.setupFileName;var a;e&&(await b.startLevel(e.trim()),w.value=!1,_.bind("esc",S),_.bind("r",D),a=d.value.currentLevel.backgroundMusic,j.src="/music/"+a,j.loop=!0,await j.play())},M=async e=>{switch(e){case y.WIN:G.value=f.WIN,A.value++,_.unbind(["esc","r"]),N.value=!0,await j.pause();break;case y.RESTART:await H()}},k=async e=>{j.pause(),e||L.value++,w.value=!e},x=()=>{S(),H()},W=async()=>{j.pause(),await p.replace({name:"Level"})},Y=async()=>{j.pause(),await p.replace({name:"Home"})};return u((async()=>{b=await(async()=>await E)(),b.setGameOverOutsideHandler(M),b.setYouGoneOutsideHandler(k),g.value.appendChild(b.gameView),await H()})),(e,a)=>(r(),n(m,null,[N.value?(r(),o(c(I),{key:"menu"+A.value,mode:G.value,onResume:S,onRestart:x,onToMenu:W,onToHome:Y},null,8,["mode"])):i("",!0),w.value?(r(),o(c(O),{key:"alertBar"+L.value})):i("",!0),v("div",T,[v("div",{ref:(e,a)=>{a.gameLayer=e,g.value=e},"class":"game-layer self-center"},null,512)])],64))}});N.__scopeId="data-v-5237a132";const w=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module","default":N});export{w as G,f as M};
