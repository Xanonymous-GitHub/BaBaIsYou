import{u as a,_ as e}from"./index.84652a60.js";import{f as s,g as t,C as l,D as n,o as u,q as r,c as o,u as i,E as c,a as v,F as m,l as p,m as d,G as E,H as _,I as y}from"./core.fa5ba4b6.js";import{u as R}from"./index.9a10815c.js";var g,f;(f=g||(g={})).GENERAL="GENERAL",f.RESTART="RESTART",f.WIN="WIN",f.YOU_GONE="YOU_GONE";p("data-v-5237a132");const T={id:"game-layer","class":"\n       transform-gpu\n        flex\n        h-screen\n        justify-center\n        relative\n        bg-gray-900"};d();const N=s({setup(s){const p=R(),d=a(),f=t({}),N=t(!1),w=t(!1),A=t(0),L=t(0),b=t(g.GENERAL),G=l((()=>e((()=>import("./Menu.545c172e.js")),["assets/Menu.545c172e.js","assets/index.84652a60.js","assets/index.6ea2af88.css","assets/core.fa5ba4b6.js","assets/index.9a10815c.js"]))),I=l((()=>e((()=>import("./NoYouAlertBar.03296cd2.js")),["assets/NoYouAlertBar.03296cd2.js","assets/NoYouAlertBar.1a24c9a1.css","assets/core.fa5ba4b6.js","assets/index.84652a60.js","assets/index.6ea2af88.css","assets/index.9a10815c.js"])));let O;const j=document.createElement("audio"),P=()=>{O.pause()},S=a=>{null==a||a.preventDefault(),null==a||a.stopImmediatePropagation(),null==a||a.stopPropagation(),A.value++,N.value=!N.value,N.value?P():(O.resume(),b.value=g.GENERAL)},D=a=>{a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation(),b.value=g.RESTART,A.value++,P(),N.value=!0},H=async()=>{const a=p.value.currentLevel.setupFileName;var e;a&&(await O.startLevel(a.trim()),w.value=!1,_.bind("esc",S),_.bind("r",D),e=p.value.currentLevel.backgroundMusic,j.src="/music/"+e,j.loop=!0,await j.play())},M=async a=>{switch(a){case y.WIN:b.value=g.WIN,A.value++,_.unbind(["esc","r"]),N.value=!0,await j.pause();break;case y.RESTART:await H()}},k=async a=>{j.pause(),a||L.value++,w.value=!a},x=()=>{S(),H()},W=async()=>{j.pause(),await d.replace({name:"Level"})},Y=async()=>{j.pause(),await d.replace({name:"Home"})};return n((async()=>{O=await(async()=>await E)(),O.setGameOverOutsideHandler(M),O.setYouGoneOutsideHandler(k),f.value.appendChild(O.gameView),await H()})),(a,e)=>(u(),r(m,null,[N.value?(u(),o(i(G),{key:"menu"+A.value,mode:b.value,onResume:S,onRestart:x,onToMenu:W,onToHome:Y},null,8,["mode"])):c("",!0),w.value?(u(),o(i(I),{key:"alertBar"+L.value})):c("",!0),v("div",T,[v("div",{ref:(a,e)=>{e.gameLayer=a,f.value=a},"class":"\n         game-layer\n         self-center"},null,512)])],64))}});N.__scopeId="data-v-5237a132";const w=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module","default":N});export{w as G,g as M};
