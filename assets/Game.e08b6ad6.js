import{u as a,_ as e}from"./index.0656d41a.js";import{f as s,g as t,A as n,B as l,c as u,u as o,C as r,a as i,F as v,G as c,m,q as p,D as d,o as E,E as _}from"./core.5db55a25.js";import{u as R}from"./index.68904440.js";var f,y;(y=f||(f={})).GENERAL="GENERAL",y.RESTART="RESTART",y.WIN="WIN",y.YOU_GONE="YOU_GONE";m("data-v-239973a8");const g={id:"game-layer","class":"\n       transform-gpu\n        flex\n        h-screen\n        justify-center\n        relative\n        bg-gray-900"};p();const T=s({expose:[],setup(s){const m=R(),p=a(),y=t({}),T=t(!1),A=t(!1),N=t(0),G=t(0),O=t(f.GENERAL),b=n((()=>e((()=>__import__("./Menu.c72d0017.js")),["/assets/Menu.c72d0017.js","/assets/index.0656d41a.js","/assets/index.229a3e5b.css","/assets/core.5db55a25.js","/assets/index.68904440.js"]))),w=n((()=>e((()=>__import__("./NoYouAlertBar.f0b2e533.js")),["/assets/NoYouAlertBar.f0b2e533.js","/assets/NoYouAlertBar.6e93a7e4.css","/assets/core.5db55a25.js","/assets/index.0656d41a.js","/assets/index.229a3e5b.css","/assets/index.68904440.js"])));let I;const L=()=>{I.pause()},j=a=>{null==a||a.preventDefault(),null==a||a.stopImmediatePropagation(),null==a||a.stopPropagation(),N.value++,T.value=!T.value,T.value?L():(I.resume(),O.value=f.GENERAL)},P=a=>{a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation(),O.value=f.RESTART,N.value++,L(),T.value=!0},S=async()=>{const a=m.value.currentLevel.setupFileName;a&&(await I.startLevel(a.trim()),A.value=!1,d.bind("esc",j),d.bind("r",P))},x=async a=>{switch(a){case _.WIN:O.value=f.WIN,N.value++,d.unbind(["esc","r"]),T.value=!0;break;case _.RESTART:await S()}},D=async a=>{a||G.value++,A.value=!a},H=()=>{j(),S()},M=async()=>{await p.replace({name:"Level"})},W=async()=>{await p.replace({name:"Home"})};return l((async()=>{I=await(async()=>await c)(),I.setGameOverOutsideHandler(x),I.setYouGoneOutsideHandler(D),y.value.appendChild(I.gameView),await S()})),(a,e)=>(E(),u(v,null,[T.value?(E(),u(o(b),{key:"menu"+N.value,mode:O.value,onResume:j,onRestart:H,onToMenu:M,onToHome:W},null,8,["mode"])):r("",!0),A.value?(E(),u(o(w),{key:"alertBar"+G.value})):r("",!0),i("div",g,[i("div",{ref:y,"class":"\n         game-layer\n         self-center"},null,512)])],64))}});T.__scopeId="data-v-239973a8";const A=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module","default":T});export{A as G,f as M};
