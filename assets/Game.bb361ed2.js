import{_ as e,u as a,a as s}from"./index.8f73e322.js";import{f as t,g as l,C as u,D as r,o as n,l as o,c as i,u as c,E as v,a as m,F as p,G as d,H as _,I as E}from"./core.709ff35c.js";import{u as f}from"./index.4b53bbec.js";var y=(e=>(e.GENERAL="GENERAL",e.RESTART="RESTART",e.WIN="WIN",e.YOU_GONE="YOU_GONE",e))(y||{});const R={id:"game-layer","class":"transform-gpu flex h-screen justify-center relative bg-gray-900"},g=e(t({__name:"Game",setup(e){const t=f(),g=a(),b=l({}),T=l(!1),N=l(!1),w=l(0),A=l(0),G=l(y.GENERAL),L=u((()=>s((()=>import("./Menu.20deb464.js")),["assets/Menu.20deb464.js","assets/index.8f73e322.js","assets/index.b12da988.css","assets/core.709ff35c.js","assets/index.4b53bbec.js"]))),O=u((()=>s((()=>import("./NoYouAlertBar.e87ab609.js")),["assets/NoYouAlertBar.e87ab609.js","assets/NoYouAlertBar.0a48b90f.css","assets/index.8f73e322.js","assets/index.b12da988.css","assets/core.709ff35c.js","assets/index.4b53bbec.js"])));let I;const j=document.createElement("audio"),P=()=>{I.pause()},S=e=>{null==e||e.preventDefault(),null==e||e.stopImmediatePropagation(),null==e||e.stopPropagation(),w.value++,T.value=!T.value,T.value?P():(I.resume(),G.value=y.GENERAL)},k=e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),G.value=y.RESTART,w.value++,P(),T.value=!0},D=async()=>{const e=t.value.currentLevel.setupFileName;var a;e&&(await I.startLevel(e.trim()),N.value=!1,_.bind("esc",S),_.bind("r",k),a=t.value.currentLevel.backgroundMusic,j.src="/music/"+a,j.loop=!0,await j.play())},H=async e=>{switch(e){case E.WIN:G.value=y.WIN,w.value++,_.unbind(["esc","r"]),T.value=!0,await j.pause();break;case E.RESTART:await D()}},M=async e=>{j.pause(),e||A.value++,N.value=!e},x=()=>{S(),D()},W=async()=>{j.pause(),await g.replace({name:"Level"})},Y=async()=>{j.pause(),await g.replace({name:"Home"})};return r((async()=>{I=await(async()=>await d)(),I.setGameOverOutsideHandler(H),I.setYouGoneOutsideHandler(M),b.value.appendChild(I.gameView),await D()})),(e,a)=>(n(),o(p,null,[T.value?(n(),i(c(L),{key:"menu"+w.value,mode:G.value,onRestart:x,onResume:S,onToMenu:W,onToHome:Y},null,8,["mode"])):v("",!0),N.value?(n(),i(c(O),{key:"alertBar"+A.value})):v("",!0),m("div",R,[m("div",{ref_key:"gameLayer",ref:b,"class":"game-layer self-center"},null,512)])],64))}}),[["__scopeId","data-v-1ee867c8"]]),b=Object.freeze(Object.defineProperty({__proto__:null,"default":g},Symbol.toStringTag,{value:"Module"}));export{b as G,y as M};
