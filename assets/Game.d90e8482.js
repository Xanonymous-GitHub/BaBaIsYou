import{u as a,_ as e}from"./index.a76ee16d.js";import{f as s,g as t,C as l,D as n,o as u,q as r,c as o,u as i,E as c,a as v,F as m,l as p,m as d,G as E,H as _,I as R}from"./core.01a31b01.js";import{u as f}from"./index.ad687a25.js";var y,g;(g=y||(y={})).GENERAL="GENERAL",g.RESTART="RESTART",g.WIN="WIN",g.YOU_GONE="YOU_GONE";p("data-v-5237a132");const T={id:"game-layer","class":"\n       transform-gpu\n        flex\n        h-screen\n        justify-center\n        relative\n        bg-gray-900"};d();const N=s({setup(s){const p=f(),d=a(),g=t({}),N=t(!1),w=t(!1),A=t(0),G=t(0),I=t(y.GENERAL),L=l((()=>e((()=>import("./Menu.06da2917.js")),["assets/Menu.06da2917.js","assets/index.a76ee16d.js","assets/index.1e163de8.css","assets/core.01a31b01.js","assets/index.ad687a25.js"]))),O=l((()=>e((()=>import("./NoYouAlertBar.0dcdf84f.js")),["assets/NoYouAlertBar.0dcdf84f.js","assets/NoYouAlertBar.6e93a7e4.css","assets/core.01a31b01.js","assets/index.a76ee16d.js","assets/index.1e163de8.css","assets/index.ad687a25.js"])));let b;const j=document.createElement("audio"),P=()=>{b.pause()},S=a=>{null==a||a.preventDefault(),null==a||a.stopImmediatePropagation(),null==a||a.stopPropagation(),A.value++,N.value=!N.value,N.value?P():(b.resume(),I.value=y.GENERAL)},D=a=>{a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation(),I.value=y.RESTART,A.value++,P(),N.value=!0},H=async()=>{const a=p.value.currentLevel.setupFileName;var e;a&&(await b.startLevel(a.trim()),w.value=!1,_.bind("esc",S),_.bind("r",D),e=p.value.currentLevel.backgroundMusic,j.src="/music/"+e,j.loop=!0,await j.play())},M=async a=>{switch(a){case R.WIN:I.value=y.WIN,A.value++,_.unbind(["esc","r"]),N.value=!0,await j.pause();break;case R.RESTART:await H()}},k=async a=>{j.pause(),a||G.value++,w.value=!a},x=()=>{S(),H()},W=async()=>{j.pause(),await d.replace({name:"Level"})},Y=async()=>{j.pause(),await d.replace({name:"Home"})};return n((async()=>{b=await(async()=>await E)(),b.setGameOverOutsideHandler(M),b.setYouGoneOutsideHandler(k),g.value.appendChild(b.gameView),await H()})),(a,e)=>(u(),r(m,null,[N.value?(u(),o(i(L),{key:"menu"+A.value,mode:I.value,onResume:S,onRestart:x,onToMenu:W,onToHome:Y},null,8,["mode"])):c("",!0),w.value?(u(),o(i(O),{key:"alertBar"+G.value})):c("",!0),v("div",T,[v("div",{ref:g,"class":"\n         game-layer\n         self-center"},null,512)])],64))}});N.__scopeId="data-v-5237a132";const w=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module","default":N});export{w as G,y as M};
