import{u as a,_ as e}from"./index.e0d32a92.js";import{f as s,g as t,A as l,B as n,o as u,c as r,u as o,C as i,a as c,F as v,l as m,m as p,G as d,D as E,E as _}from"./core.de7c0958.js";import{u as R}from"./index.6d7f34e5.js";var f,y;(y=f||(f={})).GENERAL="GENERAL",y.RESTART="RESTART",y.WIN="WIN",y.YOU_GONE="YOU_GONE";m("data-v-5237a132");const g={id:"game-layer","class":"\n       transform-gpu\n        flex\n        h-screen\n        justify-center\n        relative\n        bg-gray-900"};p();const T=s({setup(s){const m=R(),p=a(),y=t({}),T=t(!1),A=t(!1),N=t(0),w=t(0),G=t(f.GENERAL),L=l((()=>e((()=>import("./Menu.c6eefa65.js")),["assets/Menu.c6eefa65.js","assets/index.e0d32a92.js","assets/index.1e163de8.css","assets/core.de7c0958.js","assets/index.6d7f34e5.js"]))),O=l((()=>e((()=>import("./NoYouAlertBar.076d88d1.js")),["assets/NoYouAlertBar.076d88d1.js","assets/NoYouAlertBar.6e93a7e4.css","assets/core.de7c0958.js","assets/index.e0d32a92.js","assets/index.1e163de8.css","assets/index.6d7f34e5.js"])));let I;const b=document.createElement("audio"),j=()=>{I.pause()},P=a=>{null==a||a.preventDefault(),null==a||a.stopImmediatePropagation(),null==a||a.stopPropagation(),N.value++,T.value=!T.value,T.value?j():(I.resume(),G.value=f.GENERAL)},S=a=>{a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation(),G.value=f.RESTART,N.value++,j(),T.value=!0},D=async()=>{const a=m.value.currentLevel.setupFileName;var e;a&&(await I.startLevel(a.trim()),A.value=!1,E.bind("esc",P),E.bind("r",S),e=m.value.currentLevel.backgroundMusic,b.src="/music/"+e,b.loop=!0,await b.play())},M=async a=>{switch(a){case _.WIN:G.value=f.WIN,N.value++,E.unbind(["esc","r"]),T.value=!0,await b.pause();break;case _.RESTART:await D()}},k=async a=>{b.pause(),a||w.value++,A.value=!a},x=()=>{P(),D()},H=async()=>{b.pause(),await p.replace({name:"Level"})},W=async()=>{b.pause(),await p.replace({name:"Home"})};return n((async()=>{I=await(async()=>await d)(),I.setGameOverOutsideHandler(M),I.setYouGoneOutsideHandler(k),y.value.appendChild(I.gameView),await D()})),(a,e)=>(u(),r(v,null,[T.value?(u(),r(o(L),{key:"menu"+N.value,mode:G.value,onResume:P,onRestart:x,onToMenu:H,onToHome:W},null,8,["mode"])):i("",!0),A.value?(u(),r(o(O),{key:"alertBar"+w.value})):i("",!0),c("div",g,[c("div",{ref:y,"class":"\n         game-layer\n         self-center"},null,512)])],64))}});T.__scopeId="data-v-5237a132";const A=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module","default":T});export{A as G,f as M};
