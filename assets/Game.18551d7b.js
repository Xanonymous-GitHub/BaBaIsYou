import{u as e,_ as a}from"./index.3bc39862.js";import{f as s,g as t,A as l,B as n,c as u,u as o,C as r,a as i,F as c,G as v,m,q as p,D as d,o as E,E as _}from"./core.5db55a25.js";import{u as f}from"./index.68904440.js";var R,y;(y=R||(R={})).GENERAL="GENERAL",y.RESTART="RESTART",y.WIN="WIN",y.YOU_GONE="YOU_GONE";m("data-v-20e2a89f");const g={id:"game-layer","class":"\n       transform-gpu\n        flex\n        h-screen\n        justify-center\n        relative\n        bg-gray-900"};p();const T=s({expose:[],setup(s){const m=f(),p=e(),y=t({}),T=t(!1),A=t(!1),N=t(0),b=t(0),w=t(R.GENERAL),G=l((()=>a((()=>__import__("./Menu.1d6ddc2f.js")),["/assets/Menu.1d6ddc2f.js","/assets/index.3bc39862.js","/assets/index.229a3e5b.css","/assets/core.5db55a25.js","/assets/index.68904440.js"]))),L=l((()=>a((()=>__import__("./NoYouAlertBar.efd7c0b0.js")),["/assets/NoYouAlertBar.efd7c0b0.js","/assets/NoYouAlertBar.6e93a7e4.css","/assets/core.5db55a25.js","/assets/index.3bc39862.js","/assets/index.229a3e5b.css","/assets/index.68904440.js"])));let O;const I=document.createElement("audio"),j=()=>{O.pause()},P=e=>{null==e||e.preventDefault(),null==e||e.stopImmediatePropagation(),null==e||e.stopPropagation(),N.value++,T.value=!T.value,T.value?j():(O.resume(),w.value=R.GENERAL)},S=e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),w.value=R.RESTART,N.value++,j(),T.value=!0},x=async()=>{const e=m.value.currentLevel.setupFileName;var a;e&&(await O.startLevel(e.trim()),A.value=!1,d.bind("esc",P),d.bind("r",S),a=m.value.currentLevel.backgroundMusic,I.src="/music/"+a,I.loop=!0,I.paused&&await I.play())},D=async e=>{switch(e){case _.WIN:w.value=R.WIN,N.value++,d.unbind(["esc","r"]),T.value=!0,await I.pause();break;case _.RESTART:await x()}},M=async e=>{I.pause(),e||b.value++,A.value=!e},k=()=>{P(),x()},H=async()=>{I.pause(),await p.replace({name:"Level"})},W=async()=>{await p.replace({name:"Home"})};return n((async()=>{O=await(async()=>await v)(),O.setGameOverOutsideHandler(D),O.setYouGoneOutsideHandler(M),y.value.appendChild(O.gameView),await x()})),(e,a)=>(E(),u(c,null,[T.value?(E(),u(o(G),{key:"menu"+N.value,mode:w.value,onResume:P,onRestart:k,onToMenu:H,onToHome:W},null,8,["mode"])):r("",!0),A.value?(E(),u(o(L),{key:"alertBar"+b.value})):r("",!0),i("div",g,[i("div",{ref:y,"class":"\n         game-layer\n         self-center"},null,512)])],64))}});T.__scopeId="data-v-20e2a89f";const A=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module","default":T});export{A as G,R as M};
