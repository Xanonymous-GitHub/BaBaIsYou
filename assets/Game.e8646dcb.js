import{u as D,a as G,_ as M}from"./index.6c0aa38a.js";import{f as V,g as r,C as R,D as Y,l as F,c as N,u as b,E as w,a as A,F as W,G as j,o as p,H as _,I as O}from"./core.aa8fe145.js";import{u as K}from"./index.78b047c5.js";var n=(s=>(s.GENERAL="GENERAL",s.RESTART="RESTART",s.WIN="WIN",s.YOU_GONE="YOU_GONE",s))(n||{});const U={id:"game-layer",class:"transform-gpu flex h-screen justify-center relative bg-gray-900"},z=V({__name:"Game",setup(s){const d=K(),f=D(),v=r({}),o=r(!1),c=r(!1),u=r(0),g=r(0),l=r(n.GENERAL),L=R(()=>G(()=>import("./Menu.f99c6bf2.js"),["assets/Menu.f99c6bf2.js","assets/index.6c0aa38a.js","assets/index.9f3f599b.css","assets/core.aa8fe145.js","assets/index.78b047c5.js"])),h=R(()=>G(()=>import("./NoYouAlertBar.aa97d92c.js"),["assets/NoYouAlertBar.aa97d92c.js","assets/NoYouAlertBar.75e14011.css","assets/core.aa8fe145.js","assets/index.6c0aa38a.js","assets/index.9f3f599b.css","assets/index.78b047c5.js"]));let a;const t=document.createElement("audio"),y=()=>{a.pause()},P=()=>{a.resume()},m=e=>{e==null||e.preventDefault(),e==null||e.stopImmediatePropagation(),e==null||e.stopPropagation(),u.value++,o.value=!o.value,o.value?y():(P(),l.value=n.GENERAL)},T=e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),l.value=n.RESTART,u.value++,y(),o.value=!0},k=e=>{const E="/music/";t.src=E+e,t.loop=!0},i=async()=>{const e=d.value.currentLevel.setupFileName;!e||(await a.startLevel(e.trim()),c.value=!1,_.bind("esc",m),_.bind("r",T),k(d.value.currentLevel.backgroundMusic),await t.play())},I=async e=>{switch(e){case O.WIN:l.value=n.WIN,u.value++,_.unbind(["esc","r"]),o.value=!0,await t.pause();break;case O.RESTART:await i();break}},S=async e=>{t.pause(),e||g.value++,c.value=!e},B=()=>{a.setGameOverOutsideHandler(I),a.setYouGoneOutsideHandler(S),v.value.appendChild(a.gameView)},H=()=>{m(),i()},x=async()=>{t.pause(),await f.replace({name:"Level"})},C=async()=>{t.pause(),await f.replace({name:"Home"})};return Y(async()=>{a=await(async()=>await j)(),B(),await i()}),(e,E)=>(p(),F(W,null,[o.value?(p(),N(b(L),{key:"menu"+u.value,mode:l.value,onRestart:H,onResume:m,onToMenu:x,onToHome:C},null,8,["mode"])):w("",!0),c.value?(p(),N(b(h),{key:"alertBar"+g.value})):w("",!0),A("div",U,[A("div",{ref_key:"gameLayer",ref:v,class:"game-layer self-center"},null,512)])],64))}});const $=M(z,[["__scopeId","data-v-8b81e332"]]),X=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{X as G,n as M};
