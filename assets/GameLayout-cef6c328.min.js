import{u as D,a as G,_ as M}from"./index-b16d1998.js";import{e as V,j as r,C as Y,m as j,c as R,u as N,D as L,a as w,F,G as W,o as p,E as A,H as _,I as b}from"./core-acc5c6b3.min.js";import{u as K}from"./index-891d2c60.min.js";var u=(s=>(s.GENERAL="GENERAL",s.RESTART="RESTART",s.WIN="WIN",s.YOU_GONE="YOU_GONE",s))(u||{});const U={id:"game-layer",class:"transform-gpu flex h-screen justify-center relative bg-gray-900"},z=V({__name:"GameLayout",setup(s){const d=K(),f=D(),y=r({}),o=r(!1),c=r(!1),n=r(0),v=r(0),l=r(u.GENERAL),O=A(()=>G(()=>import("./MainMenu-ba92845b.min.js"),["assets/MainMenu-ba92845b.min.js","assets/index-b16d1998.js","assets/core-acc5c6b3.min.js","assets/index-63a7383d.min.css","assets/index-891d2c60.min.js"])),h=A(()=>G(()=>import("./NoYouAlertBar-30041226.min.js"),["assets/NoYouAlertBar-30041226.min.js","assets/core-acc5c6b3.min.js","assets/index-b16d1998.js","assets/index-63a7383d.min.css","assets/index-891d2c60.min.js","assets/NoYouAlertBar-0a00b576.min.css"]));let a;const t=document.createElement("audio"),g=()=>{a.pause()},P=()=>{a.resume()},m=e=>{e==null||e.preventDefault(),e==null||e.stopImmediatePropagation(),e==null||e.stopPropagation(),n.value++,o.value=!o.value,o.value?g():(P(),l.value=u.GENERAL)},T=e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),l.value=u.RESTART,n.value++,g(),o.value=!0},k=e=>{const E="/music/";t.src=E+e,t.loop=!0},i=async()=>{const e=d.value.currentLevel.setupFileName;e&&(await a.startLevel(e.trim()),c.value=!1,_.bind("esc",m),_.bind("r",T),k(d.value.currentLevel.backgroundMusic),await t.play())},I=async e=>{switch(e){case b.WIN:l.value=u.WIN,n.value++,_.unbind(["esc","r"]),o.value=!0,await t.pause();break;case b.RESTART:await i();break}},S=async e=>{t.pause(),e||v.value++,c.value=!e},B=()=>{a.setGameOverOutsideHandler(I),a.setYouGoneOutsideHandler(S),y.value.appendChild(a.gameView)},H=()=>{m(),i()},x=async()=>{t.pause(),await f.replace({name:"Level"})},C=async()=>{t.pause(),await f.replace({name:"Home"})};return Y(async()=>{a=await(async()=>await W)(),B(),await i()}),(e,E)=>(p(),j(F,null,[o.value?(p(),R(N(O),{key:"menu"+n.value,mode:l.value,onRestart:H,onResume:m,onToMenu:x,onToHome:C},null,8,["mode"])):L("",!0),c.value?(p(),R(N(h),{key:"alertBar"+v.value})):L("",!0),w("div",U,[w("div",{ref_key:"gameLayer",ref:y,class:"game-layer self-center"},null,512)])],64))}});const $=M(z,[["__scopeId","data-v-ad944551"]]),X=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{X as G,u as M};
