import{d as ue,g as ie,j as S,c as fe,k as J,u as Q,l as Z,a as ee,F as le,m as W,o as Y,q as te,_ as ce}from"./index-j278QrV_.js";import{u as pe,t as de}from"./index-94PNXe_n.js";var z=(s=>(s.WIN="WIN",s.LEAVE="LEAVE",s.RESTART="RESTART",s))(z||{}),we=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _e(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function be(s){if(s.__esModule)return s;var h=s.default;if(typeof h=="function"){var _=function v(){return this instanceof v?Reflect.construct(h,arguments,this.constructor):h.apply(this,arguments)};_.prototype=h.prototype}else _={};return Object.defineProperty(_,"__esModule",{value:!0}),Object.keys(s).forEach(function(v){var c=Object.getOwnPropertyDescriptor(s,v);Object.defineProperty(_,v,c.get?c:{enumerable:!0,get:function(){return s[v]}})}),_}var re={exports:{}};(function(s){(function(h,_,v){if(!h)return;for(var c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},M={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},A={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},L={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},m,y=1;y<20;++y)c[111+y]="f"+y;for(y=0;y<=9;++y)c[y+96]=y.toString();function R(e,t,r){if(e.addEventListener){e.addEventListener(t,r,!1);return}e.attachEvent("on"+t,r)}function g(e){if(e.type=="keypress"){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return c[e.which]?c[e.which]:M[e.which]?M[e.which]:String.fromCharCode(e.which).toLowerCase()}function E(e,t){return e.sort().join(",")===t.sort().join(",")}function I(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function q(e){if(e.preventDefault){e.preventDefault();return}e.returnValue=!1}function O(e){if(e.stopPropagation){e.stopPropagation();return}e.cancelBubble=!0}function N(e){return e=="shift"||e=="ctrl"||e=="alt"||e=="meta"}function D(){if(!m){m={};for(var e in c)e>95&&e<112||c.hasOwnProperty(e)&&(m[c[e]]=e)}return m}function C(e,t,r){return r||(r=D()[e]?"keydown":"keypress"),r=="keypress"&&t.length&&(r="keydown"),r}function B(e){return e==="+"?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function G(e,t){var r,f,b,P=[];for(r=B(e),b=0;b<r.length;++b)f=r[b],L[f]&&(f=L[f]),t&&t!="keypress"&&A[f]&&(f=A[f],P.push("shift")),N(f)&&P.push(f);return t=C(f,P,t),{key:f,modifiers:P,action:t}}function x(e,t){return e===null||e===_?!1:e===t?!0:x(e.parentNode,t)}function p(e){var t=this;if(e=e||_,!(t instanceof p))return new p(e);t.target=e,t._callbacks={},t._directMap={};var r={},f,b=!1,P=!1,V=!1;function j(a){a=a||{};var o=!1,i;for(i in r){if(a[i]){o=!0;continue}r[i]=0}o||(V=!1)}function X(a,o,i,n,l,w){var u,d,T=[],k=i.type;if(!t._callbacks[a])return[];for(k=="keyup"&&N(a)&&(o=[a]),u=0;u<t._callbacks[a].length;++u)if(d=t._callbacks[a][u],!(!n&&d.seq&&r[d.seq]!=d.level)&&k==d.action&&(k=="keypress"&&!i.metaKey&&!i.ctrlKey||E(o,d.modifiers))){var oe=!n&&d.combo==l,se=n&&d.seq==n&&d.level==w;(oe||se)&&t._callbacks[a].splice(u,1),T.push(d)}return T}function F(a,o,i,n){t.stopCallback(o,o.target||o.srcElement,i,n)||a(o,i)===!1&&(q(o),O(o))}t._handleKey=function(a,o,i){var n=X(a,o,i),l,w={},u=0,d=!1;for(l=0;l<n.length;++l)n[l].seq&&(u=Math.max(u,n[l].level));for(l=0;l<n.length;++l){if(n[l].seq){if(n[l].level!=u)continue;d=!0,w[n[l].seq]=1,F(n[l].callback,i,n[l].combo,n[l].seq);continue}d||F(n[l].callback,i,n[l].combo)}var T=i.type=="keypress"&&P;i.type==V&&!N(a)&&!T&&j(w),P=d&&i.type=="keydown"};function H(a){typeof a.which!="number"&&(a.which=a.keyCode);var o=g(a);if(o){if(a.type=="keyup"&&b===o){b=!1;return}t.handleKey(o,I(a),a)}}function ae(){clearTimeout(f),f=setTimeout(j,1e3)}function ne(a,o,i,n){r[a]=0;function l(k){return function(){V=k,++r[a],ae()}}function w(k){F(i,k,a),n!=="keyup"&&(b=g(k)),setTimeout(j,10)}for(var u=0;u<o.length;++u){var d=u+1===o.length,T=d?w:l(n||G(o[u+1]).action);$(o[u],T,n,a,u)}}function $(a,o,i,n,l){t._directMap[a+":"+i]=o,a=a.replace(/\s+/g," ");var w=a.split(" "),u;if(w.length>1){ne(a,w,o,i);return}u=G(a,i),t._callbacks[u.key]=t._callbacks[u.key]||[],X(u.key,u.modifiers,{type:u.action},n,a,l),t._callbacks[u.key][n?"unshift":"push"]({callback:o,modifiers:u.modifiers,action:u.action,seq:n,level:l,combo:a})}t._bindMultiple=function(a,o,i){for(var n=0;n<a.length;++n)$(a[n],o,i)},R(e,"keypress",H),R(e,"keydown",H),R(e,"keyup",H)}p.prototype.bind=function(e,t,r){var f=this;return e=e instanceof Array?e:[e],f._bindMultiple.call(f,e,t,r),f},p.prototype.unbind=function(e,t){var r=this;return r.bind.call(r,e,function(){},t)},p.prototype.trigger=function(e,t){var r=this;return r._directMap[e+":"+t]&&r._directMap[e+":"+t]({},e),r},p.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},p.prototype.stopCallback=function(e,t){var r=this;if((" "+t.className+" ").indexOf(" mousetrap ")>-1||x(t,r.target))return!1;if("composedPath"in e&&typeof e.composedPath=="function"){var f=e.composedPath()[0];f!==e.target&&(t=f)}return t.tagName=="INPUT"||t.tagName=="SELECT"||t.tagName=="TEXTAREA"||t.isContentEditable},p.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},p.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(c[t]=e[t]);m=null},p.init=function(){var e=p(_);for(var t in e)t.charAt(0)!=="_"&&(p[t]=function(r){return function(){return e[r].apply(e,arguments)}}(t))},p.init(),h.Mousetrap=p,s.exports&&(s.exports=p),typeof v=="function"&&v.amd&&v(function(){return p})})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(re);var ve=re.exports;const U=_e(ve);var K=(s=>(s.GENERAL="GENERAL",s.RESTART="RESTART",s.WIN="WIN",s.YOU_GONE="YOU_GONE",s))(K||{});const ye={id:"game-layer",class:"transform-gpu flex h-screen justify-center relative bg-gray-900"},he=ue({__name:"GameLayout",setup(s){const h=pe(),_=ie(),v=S({}),c=S(!1),M=S(!1),A=S(0),L=S(0),m=S(K.GENERAL),y=te(()=>W(()=>import("./MainMenu-Px7ykDdy.js"),__vite__mapDeps([0,1,2,3]))),R=te(()=>W(()=>import("./NoYouAlertBar-ivI9_2II.js"),__vite__mapDeps([4,1,2,3,5])));let g;const E=document.createElement("audio"),I=()=>{g.pause()},q=()=>{g.resume()},O=r=>{r==null||r.preventDefault(),r==null||r.stopImmediatePropagation(),r==null||r.stopPropagation(),A.value++,c.value=!c.value,c.value?I():(q(),m.value=K.GENERAL)},N=r=>{r.preventDefault(),r.stopImmediatePropagation(),r.stopPropagation(),m.value=K.RESTART,A.value++,I(),c.value=!0},D=r=>{const f="/music/";E.src=f+(r??""),E.loop=!0},C=async()=>{const r=h.value.currentLevel.setupFileName;r&&(await g.startLevel(r.trim()),M.value=!1,U.bind("esc",O),U.bind("r",N),D(h.value.currentLevel.backgroundMusic),await E.play())},B=async r=>{switch(r){case z.WIN:m.value=K.WIN,A.value++,U.unbind(["esc","r"]),c.value=!0,E.pause();break;case z.RESTART:await C();break}},G=async r=>{E.pause(),r||L.value++,M.value=!r},x=()=>{g.setGameOverOutsideHandler(B),g.setYouGoneOutsideHandler(G),v.value.appendChild(g.gameView)},p=()=>{O(),C()},e=async()=>{E.pause(),await _.replace({name:"Level"})},t=async()=>{E.pause(),await _.replace({name:"Home"})};return de(async()=>{g=await(async()=>(await W(()=>import("./index-7xN151Cp.js"),__vite__mapDeps([6,1,2,3]))).default)(),x(),await C()}),(r,f)=>(Y(),fe(le,null,[c.value?(Y(),J(Q(y),{key:"menu"+A.value,mode:m.value,onRestart:p,onResume:O,onToMenu:e,onToHome:t},null,8,["mode"])):Z("",!0),M.value?(Y(),J(Q(R),{key:"alertBar"+L.value})):Z("",!0),ee("div",ye,[ee("div",{ref_key:"gameLayer",ref:v,class:"game-layer self-center"},null,512)])],64))}}),me=ce(he,[["__scopeId","data-v-70fe578b"]]),ke=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"}));export{z as G,K as M,be as a,ke as b,we as c,_e as g,U as m};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/MainMenu-Px7ykDdy.js","assets/index-j278QrV_.js","assets/index-yicb8t-P.css","assets/index-94PNXe_n.js","assets/NoYouAlertBar-ivI9_2II.js","assets/NoYouAlertBar-QkV4y_aR.css","assets/index-7xN151Cp.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}