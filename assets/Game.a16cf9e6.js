import{_ as e,u as a,a as s}from"./index.5ebd4620.js";import{f as l,g as t,C as u,D as r,o as n,l as o,c as i,u as c,E as v,a as m,F as p,G as d,H as E,I as _}from"./core.e85dc703.js";import{u as y}from"./index.b9c6b95d.js";var R,f;(f=R||(R={})).GENERAL="GENERAL",f.RESTART="RESTART",f.WIN="WIN",f.YOU_GONE="YOU_GONE";const g={id:"game-layer","class":"transform-gpu flex h-screen justify-center relative bg-gray-900"},T=e(l({setup(e){const l=y(),f=a(),T=t({}),b=t(!1),N=t(!1),w=t(0),A=t(0),L=t(R.GENERAL),G=u((()=>s((()=>import("./Menu.f9246b4f.js")),["assets/Menu.f9246b4f.js","assets/index.5ebd4620.js","assets/index.a3c85bf0.css","assets/core.e85dc703.js","assets/index.b9c6b95d.js"]))),I=u((()=>s((()=>import("./NoYouAlertBar.eda9ae3d.js")),["assets/NoYouAlertBar.eda9ae3d.js","assets/NoYouAlertBar.0a48b90f.css","assets/index.5ebd4620.js","assets/index.a3c85bf0.css","assets/core.e85dc703.js","assets/index.b9c6b95d.js"])));let O;const j=document.createElement("audio"),P=()=>{O.pause()},S=e=>{null==e||e.preventDefault(),null==e||e.stopImmediatePropagation(),null==e||e.stopPropagation(),w.value++,b.value=!b.value,b.value?P():(O.resume(),L.value=R.GENERAL)},D=e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),L.value=R.RESTART,w.value++,P(),b.value=!0},H=async()=>{const e=l.value.currentLevel.setupFileName;var a;e&&(await O.startLevel(e.trim()),N.value=!1,E.bind("esc",S),E.bind("r",D),a=l.value.currentLevel.backgroundMusic,j.src="/music/"+a,j.loop=!0,await j.play())},M=async e=>{switch(e){case _.WIN:L.value=R.WIN,w.value++,E.unbind(["esc","r"]),b.value=!0,await j.pause();break;case _.RESTART:await H()}},k=async e=>{j.pause(),e||A.value++,N.value=!e},x=()=>{S(),H()},W=async()=>{j.pause(),await f.replace({name:"Level"})},Y=async()=>{j.pause(),await f.replace({name:"Home"})};return r((async()=>{O=await(async()=>await d)(),O.setGameOverOutsideHandler(M),O.setYouGoneOutsideHandler(k),T.value.appendChild(O.gameView),await H()})),(e,a)=>(n(),o(p,null,[b.value?(n(),i(c(G),{key:"menu"+w.value,mode:L.value,onRestart:x,onResume:S,onToMenu:W,onToHome:Y},null,8,["mode"])):v("",!0),N.value?(n(),i(c(I),{key:"alertBar"+A.value})):v("",!0),m("div",g,[m("div",{ref:(e,a)=>{a.gameLayer=e,T.value=e},"class":"game-layer self-center"},null,512)])],64))}}),[["__scopeId","data-v-1ee867c8"]]),b=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module","default":T});export{b as G,R as M};
