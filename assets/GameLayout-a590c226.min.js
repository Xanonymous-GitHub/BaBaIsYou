import{u as D,a as G,_ as M}from"./index-fae6d1da.js";import{f as V,g as r,B as R,C as Y,l as F,c as N,u as L,D as w,a as A,F as W,G as j,o as p,E as _,H as b}from"./core-1a7ee9d6.min.js";import{u as K}from"./index-731f0626.min.js";var u=(s=>(s.GENERAL="GENERAL",s.RESTART="RESTART",s.WIN="WIN",s.YOU_GONE="YOU_GONE",s))(u||{});const U={id:"game-layer",class:"transform-gpu flex h-screen justify-center relative bg-gray-900"},z=V({__name:"GameLayout",setup(s){const d=K(),f=D(),y=r({}),o=r(!1),c=r(!1),n=r(0),v=r(0),l=r(u.GENERAL),O=R(()=>G(()=>import("./MainMenu-f08c1b44.min.js"),["assets/MainMenu-f08c1b44.min.js","assets/index-fae6d1da.js","assets/core-1a7ee9d6.min.js","assets/index-9fb8683d.min.css","assets/index-731f0626.min.js"])),h=R(()=>G(()=>import("./NoYouAlertBar-b5b4c993.min.js"),["assets/NoYouAlertBar-b5b4c993.min.js","assets/core-1a7ee9d6.min.js","assets/index-fae6d1da.js","assets/index-9fb8683d.min.css","assets/index-731f0626.min.js","assets/NoYouAlertBar-0a00b576.min.css"]));let a;const t=document.createElement("audio"),g=()=>{a.pause()},P=()=>{a.resume()},m=e=>{e==null||e.preventDefault(),e==null||e.stopImmediatePropagation(),e==null||e.stopPropagation(),n.value++,o.value=!o.value,o.value?g():(P(),l.value=u.GENERAL)},T=e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),l.value=u.RESTART,n.value++,g(),o.value=!0},k=e=>{const E="/music/";t.src=E+e,t.loop=!0},i=async()=>{const e=d.value.currentLevel.setupFileName;e&&(await a.startLevel(e.trim()),c.value=!1,_.bind("esc",m),_.bind("r",T),k(d.value.currentLevel.backgroundMusic),await t.play())},B=async e=>{switch(e){case b.WIN:l.value=u.WIN,n.value++,_.unbind(["esc","r"]),o.value=!0,await t.pause();break;case b.RESTART:await i();break}},I=async e=>{t.pause(),e||v.value++,c.value=!e},S=()=>{a.setGameOverOutsideHandler(B),a.setYouGoneOutsideHandler(I),y.value.appendChild(a.gameView)},x=()=>{m(),i()},H=async()=>{t.pause(),await f.replace({name:"Level"})},C=async()=>{t.pause(),await f.replace({name:"Home"})};return Y(async()=>{a=await(async()=>await j)(),S(),await i()}),(e,E)=>(p(),F(W,null,[o.value?(p(),N(L(O),{key:"menu"+n.value,mode:l.value,onRestart:x,onResume:m,onToMenu:H,onToHome:C},null,8,["mode"])):w("",!0),c.value?(p(),N(L(h),{key:"alertBar"+v.value})):w("",!0),A("div",U,[A("div",{ref_key:"gameLayer",ref:y,class:"game-layer self-center"},null,512)])],64))}});const $=M(z,[["__scopeId","data-v-ad944551"]]),X=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{X as G,u as M};
