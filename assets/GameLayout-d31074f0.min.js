import{u as M,a as G,_ as V}from"./index-820b1b91.js";import{f as Y,g as r,D as R,E as C,l as F,c as N,u as L,G as w,a as A,F as W,H as j,o as p,I as _,J as b}from"./core-84c56f5a.min.js";import{u as K}from"./index-fdc73a9c.min.js";var u=(s=>(s.GENERAL="GENERAL",s.RESTART="RESTART",s.WIN="WIN",s.YOU_GONE="YOU_GONE",s))(u||{});const U={id:"game-layer",class:"transform-gpu flex h-screen justify-center relative bg-gray-900"},z=Y({__name:"GameLayout",setup(s){const d=K(),f=M(),y=r({}),o=r(!1),c=r(!1),n=r(0),v=r(0),l=r(u.GENERAL),O=R(()=>G(()=>import("./MainMenu-13ba2b08.min.js"),["assets/MainMenu-13ba2b08.min.js","assets/index-820b1b91.js","assets/core-84c56f5a.min.js","assets/index-5edb5c14.min.css","assets/index-fdc73a9c.min.js"])),h=R(()=>G(()=>import("./NoYouAlertBar-c17f47e7.min.js"),["assets/NoYouAlertBar-c17f47e7.min.js","assets/core-84c56f5a.min.js","assets/index-820b1b91.js","assets/index-5edb5c14.min.css","assets/index-fdc73a9c.min.js","assets/NoYouAlertBar-0a00b576.min.css"]));let a;const t=document.createElement("audio"),g=()=>{a.pause()},P=()=>{a.resume()},m=e=>{e==null||e.preventDefault(),e==null||e.stopImmediatePropagation(),e==null||e.stopPropagation(),n.value++,o.value=!o.value,o.value?g():(P(),l.value=u.GENERAL)},T=e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),l.value=u.RESTART,n.value++,g(),o.value=!0},k=e=>{const E="/music/";t.src=E+e,t.loop=!0},i=async()=>{const e=d.value.currentLevel.setupFileName;e&&(await a.startLevel(e.trim()),c.value=!1,_.bind("esc",m),_.bind("r",T),k(d.value.currentLevel.backgroundMusic),await t.play())},I=async e=>{switch(e){case b.WIN:l.value=u.WIN,n.value++,_.unbind(["esc","r"]),o.value=!0,await t.pause();break;case b.RESTART:await i();break}},S=async e=>{t.pause(),e||v.value++,c.value=!e},B=()=>{a.setGameOverOutsideHandler(I),a.setYouGoneOutsideHandler(S),y.value.appendChild(a.gameView)},x=()=>{m(),i()},H=async()=>{t.pause(),await f.replace({name:"Level"})},D=async()=>{t.pause(),await f.replace({name:"Home"})};return C(async()=>{a=await(async()=>await j)(),B(),await i()}),(e,E)=>(p(),F(W,null,[o.value?(p(),N(L(O),{key:"menu"+n.value,mode:l.value,onRestart:x,onResume:m,onToMenu:H,onToHome:D},null,8,["mode"])):w("",!0),c.value?(p(),N(L(h),{key:"alertBar"+v.value})):w("",!0),A("div",U,[A("div",{ref_key:"gameLayer",ref:y,class:"game-layer self-center"},null,512)])],64))}});const J=V(z,[["__scopeId","data-v-ad944551"]]),X=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{X as G,u as M};
