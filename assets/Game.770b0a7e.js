import{u as a,_ as e}from"./index.cbf87dba.js";import{f as s,g as t,A as l,B as n,o as u,c as r,u as o,C as c,a as i,F as v,l as m,m as p,G as d,D as E,E as _}from"./core.debca211.js";import{u as R}from"./index.d7b86664.js";var b,f;(f=b||(b={})).GENERAL="GENERAL",f.RESTART="RESTART",f.WIN="WIN",f.YOU_GONE="YOU_GONE";m("data-v-5237a132");const y={id:"game-layer","class":"\n       transform-gpu\n        flex\n        h-screen\n        justify-center\n        relative\n        bg-gray-900"};p();const g=s({setup(s){const m=R(),p=a(),f=t({}),g=t(!1),T=t(!1),A=t(0),N=t(0),w=t(b.GENERAL),G=l((()=>e((()=>import("./Menu.cfc039bb.js")),["assets/Menu.cfc039bb.js","assets/index.cbf87dba.js","assets/index.1e163de8.css","assets/core.debca211.js","assets/index.d7b86664.js"]))),L=l((()=>e((()=>import("./NoYouAlertBar.8ede25b7.js")),["assets/NoYouAlertBar.8ede25b7.js","assets/NoYouAlertBar.6e93a7e4.css","assets/core.debca211.js","assets/index.cbf87dba.js","assets/index.1e163de8.css","assets/index.d7b86664.js"])));let O;const I=document.createElement("audio"),j=()=>{O.pause()},P=a=>{null==a||a.preventDefault(),null==a||a.stopImmediatePropagation(),null==a||a.stopPropagation(),A.value++,g.value=!g.value,g.value?j():(O.resume(),w.value=b.GENERAL)},S=a=>{a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation(),w.value=b.RESTART,A.value++,j(),g.value=!0},D=async()=>{const a=m.value.currentLevel.setupFileName;var e;a&&(await O.startLevel(a.trim()),T.value=!1,E.bind("esc",P),E.bind("r",S),e=m.value.currentLevel.backgroundMusic,I.src="/music/"+e,I.loop=!0,await I.play())},M=async a=>{switch(a){case _.WIN:w.value=b.WIN,A.value++,E.unbind(["esc","r"]),g.value=!0,await I.pause();break;case _.RESTART:await D()}},k=async a=>{I.pause(),a||N.value++,T.value=!a},x=()=>{P(),D()},H=async()=>{I.pause(),await p.replace({name:"Level"})},W=async()=>{I.pause(),await p.replace({name:"Home"})};return n((async()=>{O=await(async()=>await d)(),O.setGameOverOutsideHandler(M),O.setYouGoneOutsideHandler(k),f.value.appendChild(O.gameView),await D()})),(a,e)=>(u(),r(v,null,[g.value?(u(),r(o(G),{key:"menu"+A.value,mode:w.value,onResume:P,onRestart:x,onToMenu:H,onToHome:W},null,8,["mode"])):c("",!0),T.value?(u(),r(o(L),{key:"alertBar"+N.value})):c("",!0),i("div",y,[i("div",{ref:f,"class":"\n         game-layer\n         self-center"},null,512)])],64))}});g.__scopeId="data-v-5237a132";const T=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module","default":g});export{T as G,b as M};
